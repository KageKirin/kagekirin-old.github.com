
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Mulberry Jam - Code Alchemist</title>
  <meta name="author" content="Chris Helmich">

  
  <meta name="description" content="I&#8217;ve been tinkering with Mulberry/Toura (read Mulberry by Toura) lately. It&#8217;s surprisingly easy how you can create a simple app.
For my &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://kagekirin.github.com/blog/2012/03/07/mulberry-jam">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Code Alchemist" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29293069-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Code Alchemist</a></h1>
  
    <h2>KageKirin's Dev Blog</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:kagekirin.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Mulberry Jam</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-07T01:00:00+09:00" pubdate data-updated="true">Mar 7<span>th</span>, 2012</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>I&#8217;ve been tinkering with <a href="http://mulberry.toura.com">Mulberry/Toura</a> (read Mulberry by Toura) lately. It&#8217;s surprisingly easy how you can create a simple app.
For my needs, a simple &#8220;information app&#8221;, it&#8217;s really perfect.<br/>
But since I had some starter issues, here&#8217;s a short tutorial on what I did.<br/>
Note: I will mostly cover the iOS apps development process since I just happen to have this hardware.
(OK, me not wanting to bother with installing Eclipse at the moment is the other perfectly valid reason).</p>

<h2>Installation</h2>

<p>You can install Mulberry from the <a href="http://mulberry.toura.com/download/">release package</a> or by cloning its <a href="https://github.com/Toura/mulberry">git repo on GitHub</a>. I recommend you to do the latter because it&#8217;s easier to get updates.
In fact, you should fork it first, then clone your fork, and finally add the official repo as another remote.</p>

<p>The <a href="https://github.com/Toura/mulberry/tree/master/install/osx">installation</a> script will install all the missing parts but you will need to have Java and Xcode4 (on OSX, obviously) installed beforehand.</p>

<p>Although the installation script should fetch everything automatically, there are 2 points that need attention:<br/>
-   the PhoneGap version that comes with it lags 2 minor revisions behind (1.5.0 was just released), so you will want to update PhoneGap from the <a href="link%20here">official release</a> (or its GitHub repo if you&#8217;re feeling like it).
-   Ruby 1.9.2 might fail to install on OSX for some reason.</p>

<p>Actually, if you&#8217;re installing from the GitHub clone, just modify the reference to PhoneGap 1.3.0 to the new version in <code>install.sh</code> like this (starting around line 133, and search-and-replace is your friend):</p>

<figure class='code'><figcaption><span>starting around line 133 of osx/install.sh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">if</span> <span class="o">[[</span> <span class="k">$(</span>cat ~/Documents/PhoneGapLib/VERSION <span class="k">)</span> <span class="o">=</span>~ <span class="s1">&#39;1.5.0&#39;</span> <span class="o">]]</span>
</span><span class='line'><span class="k">then</span>
</span><span class='line'><span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;PhoneGap 1.5.0 is installed.&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'><span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;Downloading PhoneGap 1.5.0 to tmp/callback-phonegap-b81151f...&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nb">cd </span>tmp
</span><span class='line'>  curl https://nodeload.github.com/callback/phonegap/zipball/1.5.0 --O phonegap.1.5.0.zip
</span><span class='line'>
</span><span class='line'>  unzip -q phonegap.1.5.0.zip
</span><span class='line'>  <span class="nb">cd</span> ..
</span><span class='line'>
</span><span class='line'>  hdiutil mount tmp/callback-phonegap-b81151f/iOS/PhoneGap-1.5.0.dmg
</span><span class='line'>
</span><span class='line'>  open /Volumes/PhoneGap-1.5.0/PhoneGap-1.5.0.pkg
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>RVM has issues installing Ruby 1.9.3 on OSX for some reasons. :(<br/>
But you can install Ruby 1.9.2 (i.e. leave your Ruby installation for Octopress as it is) and change the reference to Ruby in the <code>.rvmrc</code> to:</p>

<pre><code>rvm use 1.9.2@mulberry
</code></pre>

<p>The (probably safer) alternative way is to modify <code>install.sh</code> again to install Ruby 1.9.2 instead. (Again, search-and-replace works miracles for that).</p>

<figure class='code'><figcaption><span>starting at around line 66 of osx/install.sh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">if</span> <span class="o">[[</span> <span class="nv">$RVMRUBIES</span> <span class="o">=</span>~ <span class="s1">&#39;1.9.2&#39;</span> <span class="o">]]</span>
</span><span class='line'><span class="k">then</span>
</span><span class='line'><span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;Ruby 1.9.2 is installed...&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'><span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;Installing Ruby 1.9.2 via RVM...&quot;</span>
</span><span class='line'>  rvm install 1.9.2
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># a bit below</span>
</span><span class='line'><span class="k">if</span> <span class="o">[[</span> <span class="nv">$RVMGEMSETS</span> <span class="o">=</span>~ <span class="s1">&#39;mulberry&#39;</span> <span class="o">]]</span>
</span><span class='line'><span class="k">then</span>
</span><span class='line'><span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;Mulberry gemset exists...&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'><span class="k">  </span><span class="nb">echo</span> <span class="s2">&quot;Creating Mulberry gemset...&quot;</span>
</span><span class='line'>  rvm use 1.9.2
</span><span class='line'>  rvm gemset create <span class="s1">&#39;mulberry&#39;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># a few lines further down</span>
</span><span class='line'>rvm use 1.9.2@mulberry
</span></code></pre></td></tr></table></div></figure>


<p>Here&#8217;s the fully changed file:</p>

<div><script src='https://gist.github.com/1990770.js?file='></script>
<noscript><pre><code># install.sh: Installation script for OSX
PACKAGES='git chromedriver android-sdk'

XCODEFILE=$(which xed)
RVMFILE=$(which rvm)
BREWFILE=$(which brew)
GEMFILE=$(which gem)
JAVAFILE=$(which java)
ANTFILE=$(which ant)
ANDROIDFILE=$(which android)

function check_or_install_brew_pkg() {
    FILELOCATION=$(which $1)
    if [ &quot;$FILELOCATION&quot; ]
    then
        echo &quot;$1 is installed...&quot;
    else
        echo &quot;Installing $1...&quot;
        brew install $1
    fi
}

# Due to bug in xcode install xed may not be in path
# ref http://stackoverflow.com/questions/7317785/terminal-xed-command-missing-after-new-xcode-install
if [ &quot;$XCODEFILE&quot; ] || [ -x &quot;/Developer/usr/bin/xed&quot; ]
then
    echo &quot;XCode is installed...&quot;
else
    echo &quot;XCode is not installed. Please install XCode 4.3+ from http://itunes.apple.com/us/app/xcode/id448457090?mt=12&quot;
    exit 1
fi

if [ &quot;$RVMFILE&quot; ]
then
    echo &quot;RVM is installed...&quot;
else
    echo &quot;Installing RVM...&quot;
    bash &lt; &lt;(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer )
fi


if [ &quot;$GEMFILE&quot; ]
then
    echo &quot;Rubygems is installed...&quot;
else
    echo &quot;Installing Rubygems...&quot;
    cd tmp
    curl http://production.cf.rubygems.org/rubygems/rubygems-1.8.11.tgz --O rubygems-1.8.12.tgz

    tar -xzvf rubygems-1.8.11.tgz
    cd rubygems-1.8.11
    ruby setup.rb # install rubygems
    cd ..
    rm -rf rubygems*
    cd ..
fi


RVMRUBIES=$(rvm list strings)

if [[ $RVMRUBIES =~ '1.9.2' ]]
then
    echo &quot;Ruby 1.9.2 is installed...&quot;
else
    echo &quot;Installing Ruby 1.9.2 via RVM...&quot;
    rvm install 1.9.2
fi

RVMGEMSETS=$(rvm gemset list strings)

if [[ $RVMGEMSETS =~ 'mulberry' ]]
then
    echo &quot;Mulberry gemset exists...&quot;
else
    echo &quot;Creating Mulberry gemset...&quot;
    rvm use 1.9.2
    rvm gemset create 'mulberry'
fi

rvm use 1.9.2@mulberry


if [ &quot;$BREWFILE&quot; ]
then
    echo &quot;Homebrew is installed...&quot;
else
    echo &quot;Installing Homebrew...&quot;
    ruby -e &quot;$(curl -fsSL https://raw.github.com/gist/323731)&quot;
fi


if [ &quot;$JAVAFILE&quot; ]
then
    echo &quot;Java is installed...&quot;
else
    echo &quot;Java is not installed. Please install java from http://www.java.com/en/download/index.jsp&quot;
    exit 1
fi


if [ &quot;$ANTFILE&quot; ]
then
    echo &quot;Apache ant is installed...&quot;
else
    brew install https://raw.github.com/adamv/homebrew-alt/master/duplicates/ant.rb
fi


BUNDLERFILE=$(gem which bundler)

if [[ &quot;$BUNDLERFILE&quot; =~ /*ERROR*/ ]]
then
    echo &quot;Installing bundler...&quot;
    gem install bundler
else
    echo &quot;Bundler is installed...&quot;
fi

for package in $PACKAGES
do
    check_or_install_brew_pkg $package
done


if [ &quot;$ANDROIDFILE&quot; ]
then
    echo &quot;Android is installed...&quot;
else
    echo &quot;Installing android&quot;
    brew install android-sdk
fi

if [[ $(cat ~/Documents/PhoneGapLib/VERSION ) =~ '1.5.0' ]]
then
    echo &quot;PhoneGap 1.5.0 is installed.&quot;
else
    echo &quot;Downloading PhoneGap 1.5.0 to tmp/callback-phonegap-b81151f...&quot;

    cd tmp
    curl https://github.com/phonegap/phonegap/zipball/1.5.0 --O phonegap.1.5.0.zip

    unzip -q phonegap.1.5.0.zip
    cd ..

    hdiutil mount tmp/callback-phonegap-b81151f/iOS/PhoneGap-1.5.0.dmg

    open /Volumes/PhoneGap-1.5.0/PhoneGap-1.5.0.pkg
fi
</code></pre></noscript></div>


<p>The install script will add a few lines to <code>.bash_profile</code>. You might need to adapt this to your installation. (<code>.profile</code> is usually the default shell config on OSX).</p>

<h2>Hello Mulberry and Terminology</h2>

<p>In Mulberry&#8217;s terms, creating the base for an app is called <em>to scaffold</em>, so this is the first command to invoke.<br/>
Note that you have to be inside the folder you installed Mulberry to for it to work. (That&#8217;s an issue related to RVM, afaik).</p>

<p>In my setup, I created an folder called <code>Apps</code> in the root folder of Mulberry and symbolically linked it to ~/Documents/Coding/Apps so I can retrieve it easily.</p>

<p>To create the scaffolding of your very own app, in <code>&lt;mulberry-root&gt;/&lt;my-apps&gt;</code>, just run</p>

<pre><code>mulberry scaffold HelloMulberry
</code></pre>

<p>which will an app called <code>HelloMulberry</code> in the folder <code>&lt;mulberry-root&gt;/&lt;my-apps&gt;/HelloMulberry</code> in this case. Note that the folder should not exist prior to running the command, or else the command will most probably fail.</p>

<p><strong>Note for git</strong>: since your project will lie inside mulberry&#8217;s root folder, it will be tracked by the base repo.
To change this, you could move the app folder to some temp folder, run <code>git init</code> there and move it back (and <code>git submodule add</code> it if required).</p>

<p>For all the remaining commands to work, you need to be inside the folder created for your app.</p>

<p>Once the <code>scaffold</code> command has returned safely, you can directly test your app with these commands:</p>

<p>To generate all the pages and create the custom components:</p>

<pre><code>mulberry generate
</code></pre>

<p>To generate and launch a webserver (on port 3001 by default) from where you can access your app in Mobile Safari:</p>

<pre><code>mulberry serve
</code></pre>

<p>To launch the full build process for debug builds, at which end it will start Xcode from where you can Apple-R(un) the app either in the simulator or on your provisioned device:</p>

<pre><code>mulberry test
</code></pre>

<p>Debug builds include the debugging toolbar and uncompressed Javascript.</p>

<p>To launch the full build process for builds ready to be submitted, use</p>

<pre><code>mulberry deploy
</code></pre>

<p>which builds for all devices specified in the <code>config.yml</code>.<br/>
Deploy builds do NOT include the debugging toolbar, nor the uncompressed Javascript.</p>

<p>There is a fully featured demo in <code>&lt;mulberry-root&gt;/demo</code> that is worth checking out as an example. There used to be other apps in previous revisions (which disappeared in a recent update),
but it might be interesting to branch them as well.</p>

<h2>Content creation</h2>

<p>The base command to create new content is</p>

<pre><code>mulberry create &lt;content-type&gt; &lt;name&gt;
</code></pre>

<p>with a few exceptions I will explain later.</p>

<h3>Adding pages</h3>

<pre><code>mulberry create page &lt;pagename&gt;
</code></pre>

<p>will create a file at <code>&lt;app-root&gt;/pages/&lt;pagename&gt;.md</code> that contains the basic YAML front matter for defining a page, and some sample text.</p>

<p>To access this newly created page, you need to edit <code>&lt;app-root&gt;/sitemap.yml</code> in order to include it at the correct place in the page hierarchy. It&#8217;s YAML, and it really contains just the hierarchy. Mulberry will arrange the pages to present the links on the subsequent pages in the order you declare them.</p>

<figure class='code'><figcaption><span>real-life example of a sitemap.yml</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">home</span><span class="p-Indicator">:</span>
</span><span class='line'>  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">osu</span>
</span><span class='line'>  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">dojokun</span>
</span><span class='line'>  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">organization</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">founder</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">president</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">vicepresident</span>
</span><span class='line'>    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ikocommittee</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">about</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note: all pages lie in <code>&lt;app-root&gt;/pages/</code>, without any folder hierarchy. Good naming (prefixes?) might greatly ease the pain of dealing with lots of pages.</p>

<h3>Adding images, videos and audios</h3>

<p>From my (naive and potentially wrong) understanding of the docs, these kind of <em>assets</em> can be added for visualization/playback to a page with the right page-def (format) to present it.
This also counts for all the other type of implemented assets, or for your custom ones.</p>

<p>Any asset needs to be placed inside the correct folder, which is<br/>
<code>&lt;app-root&gt;/assets/&lt;asset-type&gt;/</code> for the <em>asset</em> file itself,<br/>
<code>&lt;app-root&gt;/assets/&lt;asset-type&gt;/captions/</code> for a <em>caption</em> describing the asset, which is a markdown file with the same name as the asset,<br/>
and the reference to it must be placed inside the page referring to it.<br/>
(Don&#8217;t panic, it&#8217;ll all become much clearer in the example below).</p>

<h4>Example: a sample video</h4>

<ol>
<li>We place our asset <code>sample_video.mp4</code> into <code>&lt;app-root&gt;/assets/videos/sample_video.mp4</code>.</li>
<li>We create the caption <code>sample_video.md</code> in <code>&lt;app-root&gt;/assets/videos/captions/sample_video.md</code>.

<pre><code>touch &lt;app-root&gt;/assets/videos/captions/sample_video.md
</code></pre></li>
<li>We edit <code>sample_video.md</code> as follows (the only YAML front matter needed is the name of the video):

<pre><code>---
name: A sample video
---
This is a sample video.
</code></pre></li>
<li>We create a new page for this video with <code>mulberry create page video_page</code> and edit it as follows:</li>
<li><ol>
<li>We change the page_def to a page able to display the video: <code>videos-and-text-&lt;platform&gt;</code> sounds like a good candidate.

<pre><code>page_def:
    phone: videos-and-text-phone
    tablet: videos-and-text-tablet
</code></pre></li>
<li>We add a reference to our video to the <code>videos</code> list in the front matter:

<pre><code>videos: sample_video.mp4
</code></pre></li>
<li>Optionally, we add a header image and a short describing text inside the markdown area after the front matter.</li>
</ol>
</li>
</ol>


<p>And that&#8217;s it.<br/>
The <code>&lt;app-root&gt;/pages/video_page.md</code> should look like this:</p>

<figure class='code'><figcaption><span>a sample page for videos</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="nn">---</span>
</span><span class='line'><span class="l-Scalar-Plain">title</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">videotest</span>
</span><span class='line'><span class="l-Scalar-Plain">page_def</span><span class="p-Indicator">:</span>
</span><span class='line'>    <span class="l-Scalar-Plain">phone</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">videos-and-text-phone</span>
</span><span class='line'>    <span class="l-Scalar-Plain">tablet</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">videos-and-text-tablet</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># each of these properties can contain an array of filenames</span>
</span><span class='line'><span class="l-Scalar-Plain">images</span><span class="p-Indicator">:</span>
</span><span class='line'><span class="l-Scalar-Plain">videos</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">sample_video.mp4</span>
</span><span class='line'><span class="l-Scalar-Plain">audios</span><span class="p-Indicator">:</span>
</span><span class='line'><span class="l-Scalar-Plain">feeds</span><span class="p-Indicator">:</span>
</span><span class='line'><span class="l-Scalar-Plain">locations</span><span class="p-Indicator">:</span>
</span><span class='line'><span class="l-Scalar-Plain">data</span><span class="p-Indicator">:</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># this should optionally point at an image in the images dir</span>
</span><span class='line'><span class="l-Scalar-Plain">header_image</span><span class="p-Indicator">:</span>
</span><span class='line'><span class="nn">---</span>
</span><span class='line'><span class="l-Scalar-Plain">A test video</span>
</span></code></pre></td></tr></table></div></figure>


<p>I didn&#8217;t mention it, but the video or image has to be in a format readable by the target platform. (JPEG, PNG is fine for pictures, MP4 great for videos, and MP3 an obvious choice for audio).</p>

<p>When re-generating (or serving) the app, the video will be accessible on the page you put it on.</p>

<h3>Adding data, feeds, locations</h3>

<p>Those 3 types of assets can be created from the command line.</p>

<p>To create a data file that can contain custom data to be used by the app, use</p>

<pre><code>mulberry create data &lt;name&gt;
</code></pre>

<p>which will create a file at <code>&lt;app-root&gt;/assets/data/&lt;name&gt;.yml</code>.</p>

<p>(I haven&#8217;t figured out, what kind of data the docs mean, but I guess it&#8217;s up to the application or a custom component to read and use it).</p>

<p>To create a file associated with an RSS/ATOM feed, use</p>

<pre><code>mulberry create feed &lt;name&gt;
</code></pre>

<p>which will create a file at <code>&lt;app-root&gt;/assets/feeds/&lt;name&gt;.yml</code>.<br/>
(Note to self: run and see what kind of files are created).</p>

<p>To create a geographic location that gets included in the app, run</p>

<pre><code>mulberry create location &lt;name&gt;
</code></pre>

<p>which will create a file at <code>&lt;app-root&gt;/assets/locations/&lt;name&gt;.yml</code>.<br/>
(I still need to investigate its format and the use of this).</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Chris Helmich</span></span>

      








  


<time datetime="2012-03-07T01:00:00+09:00" pubdate data-updated="true">Mar 7<span>th</span>, 2012</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://kagekirin.github.com/blog/2012/03/07/mulberry-jam/" data-via="KageKirin" data-counturl="http://kagekirin.github.com/blog/2012/03/07/mulberry-jam/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/03/01/an-outlook-and-some-orientation/" title="Previous Post: An outlook and some orientation">&laquo; An outlook and some orientation</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/03/14/mulberry-jam-contd/" title="Next Post: Mulberry Jam (cont'd)">Mulberry Jam (cont'd) &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>I'm an european graphics programmer working in Japan and doing alchemistic experiments on code in my free time.</p>
  <p>This blog is the fruit of one of these experiments.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/06/02/my-work-environment/">My Work Environment (at work, 2012)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/31/generalized-motion-blur-contd/">Generalized Motion Blur (cont'd)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/26/generalized-motion-blur-idea/">Generalized Motion Blur (idea)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/05/test-driven-shader-development-an-idea/">Test-Driven Shader Development (an idea)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/04/jekyll-plugin-for-graphviz/">Jekyll plugin for Graphviz</a>
      </li>
    
  </ul>
</section>
<section>
	<h1>Tag Cloud</h1>
	<span id="tag-cloud"><a href='/blog/categories/graphics' style='font-size: 140.0%'>graphics</a> <a href='/blog/categories/ios' style='font-size: 120.0%'>ios</a> <a href='/blog/categories/jekyll' style='font-size: 140.0%'>jekyll</a> <a href='/blog/categories/mulberry' style='font-size: 120.0%'>mulberry</a> <a href='/blog/categories/octopress' style='font-size: 160.0%'>octopress</a> <a href='/blog/categories/post-processing-effects' style='font-size: 140.0%'>post-processing effects</a> <a href='/blog/categories/rant' style='font-size: 120.0%'>rant</a> <a href='/blog/categories/shader' style='font-size: 120.0%'>shader</a> <a href='/blog/categories/tdd' style='font-size: 120.0%'>TDD</a> <a href='/blog/categories/web' style='font-size: 120.0%'>web</a> <a href='/blog/categories/webgl' style='font-size: 120.0%'>webgl</a> <a href='/blog/categories/work' style='font-size: 120.0%'>work</a> </span>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/KageKirin">@KageKirin</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'KageKirin',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("KageKirin", 5, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/KageKirin" class="twitter-follow-button" data-show-count="false">Follow @KageKirin</a>
  
</section>


<section>
  <h1>Coderwall Badges</h1>
  <p>
    <script type="text/javascript">
      function display_coderwall(args) {
        var badges = args["data"]["badges"];
        var wall = '';
        for ( var i = 0; i < badges.length; i++ ) {
          var alt_txt = badges[i]["name"];
          var title_txt = badges[i]["name"] + ' - ' + badges[i]["description"];
          wall += '<a href="http://coderwall.com/KageKirin/"><img src="'
            + badges[i]["badge"]
            + '" width="48" height="48" alt="' + alt_txt
            + '" title="' + title_txt
            + '"/></a>';
        }
        document.write(wall);
      }
    </script>
    <script src="http://coderwall.com/KageKirin.json?callback=display_coderwall"></script>
  </p>
  
  <p><a href="http://coderwall.com/KageKirin"><img src="http://api.coderwall.com/KageKirin/endorsecount.png" /></a></p>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/kurisu.kirin@gmail.com?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section>
  <h1>Blogroll</h1>
  <ul>
      <li><a href="http://crimsonsquirrel.heroku.com">My Life in Japan</a></li>    
  </ul>
</section>

<section>
  <h1>Xbox Live</h1>
  <iframe src="http://gamercard.xbox.com/KageKirin.card" scrolling="no" frameBorder="0" height="140" width="204">KageKirin</iframe>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Chris Helmich -
  <span class="credit">
  Powered by <a href="http://octopress.org">Octopress</a> - 
  <a href="https://github.com/erikzaadi/solarized-octopress-theme">Solarized theme</a>
  by <a href="https://github.com/erikzaadi">Erik Zaadi</a>
  </span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'kagekirin';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://kagekirin.github.com/blog/2012/03/07/mulberry-jam/';
        var disqus_url = 'http://kagekirin.github.com/blog/2012/03/07/mulberry-jam/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
